//alert("Hi there, mate!");


// All data available to this vocabulary exercise app.
var vocabulary = {

  "wordSets" : [
  
    {
      "source": "ÉDITO B2",
      "unit": "Unité 2",
      "page": 32,
      "section": "DU CÔTÉ DES ANIMAUX",
      "words": [
        { "foreign": "aboyer", "grammar": "vi", "pronunciation": "abu^aje.", "meaning": "štěkat" },
        { "foreign": "bêler", "grammar": "vi", "pronunciation": "bele.", "meaning": "bečet" },
        { "foreign": "bourdonner", "grammar": "vi", "pronunciation": "burdone.", "meaning": "bzučet, hučet" },
        { "foreign": "'hurler", "grammar": "vi", "pronunciation": "ürle.", "meaning": "výt, řvát" },
        { "foreign": "chanter", "grammar": "vi vt", "pronunciation": "ša~te.", "meaning": "zpívat" },
        { "foreign": "meugler", "grammar": "vi", "pronunciation": "mögle.", "meaning": "bučet" },
        { "foreign": "miauler", "grammar": "vi", "pronunciation": "mjo.le.", "meaning": "mňoukat" },
        { "foreign": "parler", "grammar": "vi", "pronunciation": "parle.", "meaning": "mluvit" },
        { "foreign": "rugir", "grammar": "vi", "pronunciation": "rüži:r", "meaning": "řvát" },
        { "foreign": "siffler", "grammar": "vi", "pronunciation": "sifle.", "meaning": "pískat, hvízdat, syčet, fičet, sípat" },

        { "foreign": "abeille", "grammar": "nf", "pronunciation": "abej", "meaning": "včela" },
        { "foreign": "chat", "grammar": "nm", "pronunciation": "ša", "meaning": "kočka, kocour" },
        { "foreign": "chien", "grammar": "nm", "pronunciation": "šje~", "meaning": "pes" },
        { "foreign": "coq", "grammar": "nm", "pronunciation": "kok", "meaning": "kohout" },
        { "foreign": "loup", "grammar": "nm", "pronunciation": "lu", "meaning": "vlk" },
        { "foreign": "mouton", "grammar": "nm", "pronunciation": "muto~", "meaning": "skopec, beránek" },
        { "foreign": "oiseau", "grammar": "nm", "pronunciation": "u^azo.", "meaning": "pták" },
        { "foreign": "perroquet", "grammar": "nm", "pronunciation": "peroke", "meaning": "papoušek" },
        { "foreign": "vache", "grammar": "nf", "pronunciation": "vaš", "meaning": "kráva" },
      ]
    },
  
    {
      "source": "Papier",
      "unit": "Serge Gainsbourg",
      "page": 1,
      "section": "Sois belle et tais-toi",
      "words": [
        { "foreign": "ramier", "grammar": "nm", "pronunciation": "ramje.", "meaning": "doupňák (holub)" },
        { "foreign": "moineau", "grammar": "nm", "pronunciation": "mu^ano.", "meaning": "vrabec" },
        { "foreign": "poule", "grammar": "nf", "pronunciation": "pul", "meaning": "slepice" },
        { "foreign": "pie", "grammar": "nf", "pronunciation": "pi", "meaning": "straka" },
        { "foreign": "chameau", "grammar": "nm", "pronunciation": "šamo.", "meaning": "velbloud (dvouhrbý)" },
        { "foreign": "'hibou", "grammar": "nm", "pronunciation": "ibu", "meaning": "sova" },
        { "foreign": "panthère", "grammar": "nf", "pronunciation": "pa~te:r", "meaning": "pardál, levhart" },
        { "foreign": "grue", "grammar": "nf", "pronunciation": "grü", "meaning": "jeřáb (pták, stroj)" },
        { "foreign": "éléphant", "grammar": "nm", "pronunciation": "e.le.fa~", "meaning": "slon" },
        { "foreign": "jument", "grammar": "nf", "pronunciation": "žüma~", "meaning": "kobyla, klisna" },
        { "foreign": "chouette", "grammar": "nf", "pronunciation": "šu^et", "meaning": "sova" },
        { "foreign": "brebis", "grammar": "nf", "pronunciation": "br@bi", "meaning": "ovce" },
        { "foreign": "crapaud", "grammar": "nm", "pronunciation": "krapo.", "meaning": "ropucha, žába" },
        { "foreign": "poulet", "grammar": "nm", "pronunciation": "pule", "meaning": "kuře" },
        { "foreign": "corbeau", "grammar": "nm", "pronunciation": "korbo.", "meaning": "krkavec, havran" },
        { "foreign": "geai", "grammar": "nm", "pronunciation": "že", "meaning": "sojka" },
        { "foreign": "cerf", "grammar": "nm", "pronunciation": "se:r", "meaning": "jelen" },
        { "foreign": "âne", "grammar": "nm", "pronunciation": "a:n", "meaning": "osel" },
        { "foreign": "lion", "grammar": "nm", "pronunciation": "ljo~", "meaning": "lev" },
        { "foreign": "cane", "grammar": "nf", "pronunciation": "kan", "meaning": "kachna (samice)" },
        { "foreign": "taureau", "grammar": "nm", "pronunciation": "toro.", "meaning": "býk" },
        { "foreign": "dindon", "grammar": "nm", "pronunciation": "de~do~", "meaning": "krocan" },
        { "foreign": "paon", "grammar": "nm", "pronunciation": "pa~", "meaning": "páv" },
        { "foreign": "caille", "grammar": "nf", "pronunciation": "ka:j", "meaning": "křepelka" },
        { "foreign": "serpent", "grammar": "nm", "pronunciation": "serpa~", "meaning": "had" },

        { "foreign": "roucouler", "grammar": "vi", "pronunciation": "rukule.", "meaning": "cukrovat, vrkat" },
        { "foreign": "pépier", "grammar": "vi", "pronunciation": "pe.pje.", "meaning": "pípat, štěbetat" },
        { "foreign": "caqueter", "grammar": "vi", "pronunciation": "kakte.", "meaning": "kdákat" },
        { "foreign": "jacasser", "grammar": "vi", "pronunciation": "žakase.", "meaning": "štěbetat" },
        { "foreign": "blatérer", "grammar": "vi", "pronunciation": "blate.re.", "meaning": "bečet (o beranu), mečet (o velbloudu)" },
        { "foreign": "'huer", "grammar": "vi", "pronunciation": "üe.", "meaning": "houkat (o sově)" },
        { "foreign": "râler", "grammar": "vi", "pronunciation": "rale.", "meaning": "chroptět, chrčet, řvát (tygr)" },
        { "foreign": "craquer", "grammar": "vi", "pronunciation": "krake.", "meaning": "praskat, skřípat, vrzat" },
        { "foreign": "baréter", "grammar": "vi", "pronunciation": "bare.te.", "meaning": "troubit (o slonu)" },
        { "foreign": "hennir", "grammar": "vi", "pronunciation": "eni:r", "meaning": "řehtat, ržát (o koni)" },
        { "foreign": "'hululer", "grammar": "vi", "pronunciation": "ülüle.", "meaning": "houkat (o sově)" },
        { "foreign": "coasser", "grammar": "vi", "pronunciation": "koase.", "meaning": "kvákat, kuňkat" },
        { "foreign": "piauler", "grammar": "vi", "pronunciation": "pjo.le.", "meaning": "pípat" },
        { "foreign": "croasser", "grammar": "vi", "pronunciation": "kroase.", "meaning": "krákorat, krákat (o vráně)" },
        { "foreign": "cajoler", "grammar": "vi", "pronunciation": "kažole.", "meaning": "křičet (o strace, sojce)" },
        { "foreign": "bramer", "grammar": "vi", "pronunciation": "brame.", "meaning": "troubit (o jelenu)" },
        { "foreign": "braire", "grammar": "vi", "pronunciation": "bre:r", "meaning": "hýkat (o oslu)" },
        { "foreign": "cancaner", "grammar": "vi", "pronunciation": "ka~kane.", "meaning": "káchat (o kachně)" },
        { "foreign": "mugir", "grammar": "vi", "pronunciation": "müži:r", "meaning": "bučet" },
        { "foreign": "glouglouter", "grammar": "vi", "pronunciation": "gluglute.", "meaning": "hudrovat (krocan)" },
        { "foreign": "brailler", "grammar": "vi", "pronunciation": "braje.", "meaning": "řvát, vřeštět (páv)" },
        { "foreign": "margoter", "grammar": "vi", "pronunciation": "margote.", "meaning": "volat (o křepelce)" },
      ]
    },
  
    {
      "source": "ÉDITO B2",
      "unit": "Unité 3",
      "page": 40,
      "section": "LA COMMUNICATION",
      "words": [
        { "foreign": "communiqué de presse", "grammar": "nm", "pronunciation": "komünike. d@ pres", "meaning": "tiskové oznámení, tisková zpráva" },
        { "foreign": "couverture médiatique", "grammar": "nf", "pronunciation": "kuvertü:r me.djatik", "meaning": "mediální zástěrka" },
        { "foreign": "conférence de presse", "grammar": "nf", "pronunciation": "ko~fe.ra~:s d@ pres", "meaning": "tisková konference" },
        { "foreign": "information", "grammar": "nf", "pronunciation": "e~formasjo~", "meaning": "zpráva, informace" },
        { "foreign": "liberté d'information", "grammar": "nf", "pronunciation": "liberte. de~formasjo~", "meaning": "svoboda informací, svobodný přístup k informacím" },
        { "foreign": "censure", "grammar": "nf", "pronunciation": "sa~sü:r", "meaning": "cenzura, kritika, výtka" },
        { "foreign": "média", "grammar": "nm", "pronunciation": "me.dja", "meaning": "médium, sdělovací prostředek" },
        { "foreign": "médiatisation", "grammar": "nf", "pronunciation": "me.djatizasjo~", "meaning": "medializace" },
        { "foreign": "médiatique", "grammar": "adj", "pronunciation": "me.djatik", "meaning": "mediální" },
        { "foreign": "multimédia", "grammar": "adj", "pronunciation": "mültime.dja", "meaning": "týkající se hromadných sdělovacích prostředků, masmediální, multimediální" },
      ]
    },
  
    {
      "source": "ÉDITO B2",
      "unit": "Unité 3",
      "page": 40,
      "section": "LA PRESSE",
      "words": [
        { "foreign": "abonnement", "grammar": "nm", "pronunciation": "abonma~", "meaning": "předplatné" },
        { "foreign": "s'abonner à qc", "grammar": "vp", "pronunciation": "sabone.", "meaning": "předplatit si co" },
        { "foreign": "agence de presse", "grammar": "nf", "pronunciation": "aža~:s d@ pres", "meaning": "tisková agentura" },
        { "foreign": "diffusion", "grammar": "nf", "pronunciation": "difüzjo~", "meaning": "rozhlas, vysílání, šíření" },
        { "foreign": "hebdomadaire", "grammar": "nm", "pronunciation": "ebdomade:r", "meaning": "týdeník" },
        { "foreign": "lecteur", "grammar": "nm", "pronunciation": "lektö:r", "meaning": "čtenář" },
        { "foreign": "lectrice", "grammar": "nf", "pronunciation": "lektris", "meaning": "čtenářka" },
        { "foreign": "lectorat", "grammar": "nm", "pronunciation": "lektora", "meaning": "čtenáři" },
        { "foreign": "mensuel", "grammar": "nm", "pronunciation": "ma~sü^el", "meaning": "zaměstnanec s měsíčním platem, měsíčník" },
        { "foreign": "périodique", "grammar": "nm", "pronunciation": "pe.rjodik", "meaning": "periodikum, periodický časopis" },
        { "foreign": "presse à scandale", "grammar": "nf", "pronunciation": "pres a ska~dal", "meaning": "skandální tisk" },
        { "foreign": "presse féminine", "grammar": "nf", "pronunciation": "pres fe.minin", "meaning": "tisk pro ženy" },
        { "foreign": "quotidien", "grammar": "nm", "pronunciation": "kotidje~", "meaning": "deník" },
        { "foreign": "régional, ale, aux", "grammar": "adj", "pronunciation": "re.žjonal", "meaning": "krajský, regionální" },
        { "foreign": "revue", "grammar": "nf", "pronunciation": "r@vü", "meaning": "revue (časopis)" },
        { "foreign": "tirage", "grammar": "nm", "pronunciation": "tira:ž", "meaning": "vlečení, tahání, kopírování, vystavení směnky, tisk, náklad (knihy)" },

        { "foreign": "avoir bonne presse", "grammar": "", "pronunciation": "avu^a:r bon pres", "meaning": "mít dobrou kritiku" },
        { "foreign": "une feuille de chou", "grammar": "", "pronunciation": "ün föj d@ šu", "meaning": "zelný list; plátek (noviny)" },
        { "foreign": "la rubrique des chiens écrasés", "grammar": "", "pronunciation": "rübrik de. šje~ e.kraze.", "meaning": "novinová rubrika s příspěvky na různá nepříliš důležitá témata" },
        { "foreign": "un torchon", "grammar": "", "pronunciation": "ö~ toršo~", "meaning": "hadr, bezcenný spis" },
      ]
    },
  
    {
      "source": "ÉDITO B2",
      "unit": "Unité 3",
      "page": 40,
      "section": "LES TYPES D'ARTICLES",
      "words": [
        { "foreign": "billet", "grammar": "nm", "pronunciation": "bije", "meaning": "malý novinový článek (často polemický nebo satirický)" },
        { "foreign": "brève", "grammar": "nf", "pronunciation": "bre:v", "meaning": "zprávička (na poslední chvíli nebo nepříliš důležitá)" },
        { "foreign": "chronique", "grammar": "nf", "pronunciation": "kronik", "meaning": "kronika; rubrika (v novinách)" },
        { "foreign": "critique", "grammar": "nf", "pronunciation": "kritik", "meaning": "kritika, odborný posudek" },
        { "foreign": "dépêche", "grammar": "nf", "pronunciation": "de.peš", "meaning": "zpráva (stručná)" },
        { "foreign": "éditorial", "grammar": "nm", "pronunciation": "e.ditorjal", "meaning": "editorial, úvodník" },
        { "foreign": "enquête", "grammar": "nf", "pronunciation": "a~ket", "meaning": "průzkum, anketa" },
        { "foreign": "entretien", "grammar": "nm", "pronunciation": "a~tr@tje~", "meaning": "rozhovor" },
        { "foreign": "reportage", "grammar": "nm", "pronunciation": "r@porta:ž", "meaning": "reportáž" },
      ]
    },
  
  ]
  
};




// Settings and preferences.
var settings = {
  // True :-: foreign words go first, the user must provide their native langauge translation,
  // false :-: native language first, the user provides a translation into the foreign language.
  "isForeignFirst": false,
  //"isForeignFirst": true,
  // True :-: words are changed automatically after a certain time delay,
  // false :-: words are changed after the user clicks a button.
  "isAutoNext": false,
  // Current time delay for the "auto next" function.
  "timeDelay": 3,
  //"timeDelay": 5,
  // True :-: interactive mode (the user enters translations into a text box),
  // false :-: non-interactive mode (the user just clicks the "Next" button, or waits for an auto change).
  "isInteractive": false,
  // True :-: words are provided in the original order (taken from the original Json data source),
  // false :-: words are presented in a random order.
  "isOriginalOrder": false
};

putSettingsToPageControls();




// Context.
var context = {
  // Word sections selected by the user to appear in the test sequence.
  "selectedSections": [],
  // Index of the current word presented to the user in the test section of the page.
  "currentWordIndex": -1
};




// HTML table with vocabulary "sections".
var sectionsTable = document.getElementById("tableSections");
// Rows of the sections table.
var sectionsTableRows = sectionsTable.children;

// Words to be offerred to the user.
var selectedWords = [];


//for (var wordSet : vocabulary.wordSets) {
//  alert(wordSet.section);
//}
for (var i = 0; i < vocabulary.wordSets.length; i++) {

  var wordSet = vocabulary.wordSets[i];
  //alert(wordSet.section);
  //sectionsTable.children
  //sectionsTableRows.
  var newRow = sectionsTable.insertRow(i + 1);

  var cellMark = newRow.insertCell(0);

  //var cellSource = newRow.insertCell(1);
  //var cellUnit = newRow.insertCell(2);
  //var cellPage = newRow.insertCell(3);
  //var cellSection = newRow.insertCell(4);

  var cellDescription = newRow.insertCell(1);
  
  cellMark.innerHTML = "<input type='checkbox' id='checkboxMarkSection" + i + "' onclick='checkboxMarkSection_Click()' />";

  //cellSource.innerHTML = wordSet.source;
  //cellUnit.innerHTML = wordSet.unit;
  //cellPage.innerHTML = wordSet.page;
  //cellSection.innerHTML = wordSet.section;

  cellDescription.innerHTML =  wordSet.unit + ": " + wordSet.section + " (" + wordSet.source + " - p. " + wordSet.page + ")";

}




// var wordSetIndex = 0;
// var wordIndex = 0;

// ***
//alert(vocabulary.words[wordIndex].foreign);
// ***

// ***
//$("#spanForeign").value = vocabulary.words[wordIndex].foreign;
//$("#spanForeign").html = vocabulary.words[wordIndex].foreign;
// ***


// ***
//alert(document.getElementById("spanForeign").text);
//alert(document.getElementById("spanForeign").innerHTML);
// ***

// ***
//$("#spanForeign").text(vocabulary.words[wordIndex].foreign);
//document.getElementById("spanForeign").text = vocabulary.words[wordIndex].foreign;
// ***
//document.getElementById("spanForeign").innerHTML = vocabulary.words[wordIndex].foreign;
//document.getElementById("spanGrammar").innerHTML = vocabulary.words[wordIndex].grammar;
//document.getElementById("spanPronunciation").innerHTML = vocabulary.words[wordIndex].pronunciation;
//document.getElementById("spanMeaning").innerHTML = vocabulary.words[wordIndex].meaning;
// ***
//document.getElementById("spanForeign").innerHTML = vocabulary.wordSets[0].words[wordIndex].foreign;
//document.getElementById("spanGrammar").innerHTML = vocabulary.wordSets[0].words[wordIndex].grammar;
//document.getElementById("spanPronunciation").innerHTML = vocabulary.wordSets[0].words[wordIndex].pronunciation;
//document.getElementById("spanMeaning").innerHTML = vocabulary.wordSets[0].words[wordIndex].meaning;
// ***
//document.getElementById("spanForeign").innerHTML = vocabulary.wordSets[1].words[wordIndex].foreign;
//document.getElementById("spanGrammar").innerHTML = vocabulary.wordSets[1].words[wordIndex].grammar;
//document.getElementById("spanPronunciation").innerHTML = vocabulary.wordSets[1].words[wordIndex].pronunciation;
//document.getElementById("spanMeaning").innerHTML = vocabulary.wordSets[1].words[wordIndex].meaning;
// ***


// document.getElementById("spanForeign").innerHTML = vocabulary.wordSets[wordSetIndex].words[wordIndex].foreign;
// document.getElementById("spanGrammar").innerHTML = vocabulary.wordSets[wordSetIndex].words[wordIndex].grammar;
// document.getElementById("spanPronunciation").innerHTML = vocabulary.wordSets[wordSetIndex].words[wordIndex].pronunciation;
// document.getElementById("spanMeaning").innerHTML = vocabulary.wordSets[wordSetIndex].words[wordIndex].meaning;




// ***
// Gets a random integer value between given limits.
// ***
// Parameters:
// minIntIncl ....................... Lower limit of generated integers (including).
// maxIntIncl ....................... Upper limit of generated integers (including).
// ***
// Returns:
// Returns a random integer that matches the above conditions (n, minIntIncl <= n <= maxIntIncl).
// ***
function getRandomIntFromInterval(minIntIncl, maxIntIncl) {
  var n = Math.floor(Math.random() * (maxIntIncl - minIntIncl + 1)) + minIntIncl;
  return n;
}




// ***
// Handles the Click event on the checkboxes checkboxMarkSection0, checkboxMarkSection1, ...
// ***
// Parameters:
// ***
// Returns:
// ***
function checkboxMarkSection_Click() {
  // Disable the "Next word" button.
  document.getElementById("buttonNext").disabled = true;
  // Enable the "Refresh the word set" button.
  document.getElementById("buttonRefresh").disabled = false;
}




//function buttonRefresh_onClick() {
// ***
// Handles the Click event on the button buttonRefresh.
// ***
// Parameters:
// ***
// Returns:
// ***
function buttonRefresh_Click() {

  selectedWords = [];
  
  //alert("Inside buttonRefresh_onClick...");
  //alert("selectedWords.length = " + selectedWords.length);

  //selectedWords = [];
  var selectedWordCounter = 0;
  
  for (var i = 0; i < vocabulary.wordSets.length; i++) {
    //var cellMark = sectionsTableRows[i].children[0];
    var checkboxMark = document.getElementById("checkboxMarkSection" + i);
    if (checkboxMark.checked) {
      var currentSection = vocabulary.wordSets[i].words;
      //for (var j = 0; j < vocabulary.wordSets[i].words.length
      for (var j = 0; j < currentSection.length; j++) {
        selectedWords[selectedWordCounter] = currentSection[j];
        selectedWordCounter++;
      }
    }
  }

  // Enable the "Next word" button.
  document.getElementById("buttonNext").disabled = false;
  // Disable the "Refresh the word set" button.
  document.getElementById("buttonRefresh").disabled = true;

  //alert("selectedWords.length = " + selectedWords.length);

}




//function buttonNext_onClick() {
// ***
// Handles the Click event on the button buttonNext.
// ***
// Parameters:
// ***
// Returns:
// ***
function buttonNext_Click() {
  
  //alert("Inside buttonNext_onClick...");
  //alert("selectedWords.length = " + selectedWords.length);

  //var randomWordIndex = getRandomIntFromInterval(0, selectedWords.length);
  var randomWordIndex = getRandomIntFromInterval(0, selectedWords.length - 1);

  //alert("randomWordIndex = " + randomWordIndex);
  
  // document.getElementById("spanForeign").innerHTML = vocabulary.wordSets[wordSetIndex].words[wordIndex].foreign;
  // document.getElementById("spanGrammar").innerHTML = vocabulary.wordSets[wordSetIndex].words[wordIndex].grammar;
  // document.getElementById("spanPronunciation").innerHTML = vocabulary.wordSets[wordSetIndex].words[wordIndex].pronunciation;
  // document.getElementById("spanMeaning").innerHTML = vocabulary.wordSets[wordSetIndex].words[wordIndex].meaning;

  // document.getElementById("spanForeign").innerHTML = selectedWords[randomWordIndex].foreign;
  // document.getElementById("spanGrammar").innerHTML = selectedWords[randomWordIndex].grammar;
  // document.getElementById("spanPronunciation").innerHTML = selectedWords[randomWordIndex].pronunciation;
  // document.getElementById("spanMeaning").innerHTML = selectedWords[randomWordIndex].meaning;

  document.getElementById("textForeign").value = selectedWords[randomWordIndex].foreign;
  document.getElementById("textGrammar").value = selectedWords[randomWordIndex].grammar;
  document.getElementById("textPronunciation").value = selectedWords[randomWordIndex].pronunciation;
  document.getElementById("textMeaning").value = selectedWords[randomWordIndex].meaning;
  
}




function radioForeignFirst_Click() {
  getSettingsFromPageControls();
}

function radioNativeFirst_Click() {
  getSettingsFromPageControls();
}

function checkboxAutoNext_Click() {
  getSettingsFromPageControls();
}

function selectTimeDelay_Click() {
  getSettingsFromPageControls();
}

function checkboxInteractive_Click() {
  getSettingsFromPageControls();
}

function radioOriginalOrder_Click() {
  getSettingsFromPageControls();
}

function radioRandomOrder_Click() {
  getSettingsFromPageControls();
}




// ***
// Transforms the settings (from the global variable "settings") into controls on the page.
// ***
// Parameters:
// ***
// Returns:
// ***
function putSettingsToPageControls() {

  // "isForeignFirst":
  document.getElementById("radioForeignFirst").checked = settings.isForeignFirst;
  document.getElementById("radioNativeFirst").checked = ( ! settings.isForeignFirst );
  
  // "isAutoNext":
  document.getElementById("checkboxAutoNext").checked = settings.isAutoNext;
  
  // "timeDelay":
  document.getElementById("selectTimeDelay").value = settings.timeDelay.toString();
  
  // "isInteractive":
  document.getElementById("checkboxInteractive").checked = settings.isInteractive;
  
  // "isOriginalOrder":
  document.getElementById("radioOriginalOrder").checked = settings.isOriginalOrder;
  document.getElementById("radioRandomOrder").checked = ( ! settings.isOriginalOrder );

}




// ***
// Transforms the page controls' state into the global variable "settings".
// ***
// Parameters:
// ***
// Returns:
// ***
function getSettingsFromPageControls() {
}




function startTimer(duration, display) {

  var timer = duration, minutes, seconds;

  setInterval(function() {
    minutes = parseInt(timer / 60, 10);
    seconds = parseInt(timer % 60, 10);

    minutes = minutes < 10 ? "0" + minutes : minutes;
    seconds = seconds < 10 ? "0" + seconds : seconds;

    display.textContent = minutes + ":" + seconds;

    // ***
    if (timer % 4 == 0) {
      //buttonNext_onClick();
      buttonNext_Click();
    }
    // ***

    if (--timer < 0) {
      timer = duration;
    }
  }, 1000);

}




//function buttonTimer_onClick() {
function buttonTimer_Click() {
  var fiveMinutes = 60 * 5;
  var display = document.querySelector('#spanTime');
  startTimer(fiveMinutes, display);
}



  


